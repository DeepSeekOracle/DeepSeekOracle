<!DOCTYPE html>
<html>
<head>
    <title>Auto Battler</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1e1e1e;
            color: white;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .game-container {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(5, 60px);
            gap: 5px;
            background: #333;
            padding: 10px;
            border-radius: 5px;
        }
        .cell {
            width: 60px;
            height: 60px;
            background: #555;
            border: 2px solid #444;
            cursor: pointer;
        }
        .unit {
            width: 100%;
            height: 100%;
            background: #4CAF50;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        .shop {
            width: 300px;
            background: #222;
            padding: 10px;
            border-radius: 5px;
        }
        .shop-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: #444;
            border-radius: 5px;
            cursor: pointer;
        }
        .shop-item:hover {
            background: #555;
        }
        .battle-log {
            width: 300px;
            height: 400px;
            background: #222;
            padding: 10px;
            overflow-y: auto;
            border-radius: 5px;
        }
        .gold {
            text-align: center;
            font-size: 20px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Auto Battler</h1>
    <div class="game-container">
        <!-- Player's board -->
        <div class="grid" id="player-grid"></div>
        <!-- Shop -->
        <div class="shop">
            <div class="gold">Gold: <span id="gold">10</span></div>
            <div id="shop-items"></div>
        </div>
        <!-- Battle log -->
        <div class="battle-log" id="battle-log"></div>
    </div>
    <script>
        // Game Data
        let playerUnits = [];
        let gold = 10;
        const GRID_SIZE = 5;
        const shopItems = [
            { name: "Warrior", cost: 3, health: 120, damage: 20, emoji: "‚öîÔ∏è" },
            { name: "Archer", cost: 4, health: 80, damage: 30, emoji: "üèπ" },
            { name: "Mage", cost: 5, health: 60, damage: 40, emoji: "üîÆ" },
            { name: "Tank", cost: 6, health: 200, damage: 10, emoji: "üõ°Ô∏è" }
        ];

        // Initialize the grid
        const playerGrid = document.getElementById('player-grid');
        const battleLog = document.getElementById('battle-log');
        const goldDisplay = document.getElementById('gold');
        const shopItemsContainer = document.getElementById('shop-items');

        for (let i = 0; i < GRID_SIZE * GRID_SIZE; i++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.dataset.position = i;
            cell.onclick = () => placeUnit(i);
            playerGrid.appendChild(cell);
        }

        // Initialize the shop
        function renderShop() {
            shopItemsContainer.innerHTML = '';
            shopItems.forEach((item, index) => {
                const shopItem = document.createElement('div');
                shopItem.className = 'shop-item';
                shopItem.innerHTML = `
                    <span>${item.emoji} ${item.name}</span>
                    <span>${item.cost}g</span>
                `;
                shopItem.onclick = () => buyUnit(index);
                shopItemsContainer.appendChild(shopItem);
            });
        }
        renderShop();

        // Buy a unit
        function buyUnit(index) {
            const item = shopItems[index];
            if (gold < item.cost) {
                log("Not enough gold!");
                return;
            }
            gold -= item.cost;
            goldDisplay.textContent = gold;
            playerUnits.push({ ...item, position: null });
            log(`Bought ${item.name} for ${item.cost}g. Place it on the grid!`);
        }

        // Place a unit
        function placeUnit(position) {
            if (playerUnits.length === 0) return;
            const cell = playerGrid.children[position];
            if (cell.children.length > 0) return; // Cell is occupied

            const unit = playerUnits.find(u => u.position === null);
            if (!unit) return;

            unit.position = position;
            const unitElement = document.createElement('div');
            unitElement.className = 'unit';
            unitElement.textContent = unit.emoji;
            cell.appendChild(unitElement);
            log(`Placed ${unit.name} on the grid.`);
        }

        // Start battle
        function startBattle() {
            const enemies = [
                { name: "Goblin", health: 100, damage: 15, emoji: "üë∫", position: 0 },
                { name: "Skeleton", health: 120, damage: 20, emoji: "üíÄ", position: 4 }
            ];

            const battleInterval = setInterval(() => {
                // Players attack enemies
                playerUnits.forEach(unit => {
                    const target = enemies[Math.floor(Math.random() * enemies.length)];
                    target.health -= unit.damage;
                    log(`${unit.name} hits ${target.name} for ${unit.damage} damage!`);
                    if (target.health <= 0) {
                        log(`${target.name} defeated!`);
                        enemies.splice(enemies.indexOf(target), 1);
                    }
                });

                // Enemies attack players
                enemies.forEach(enemy => {
                    const target = playerUnits[Math.floor(Math.random() * playerUnits.length)];
                    target.health -= enemy.damage;
                    log(`${enemy.name} hits ${target.name} for ${enemy.damage} damage!`);
                    if (target.health <= 0) {
                        log(`${target.name} defeated!`);
                        playerUnits.splice(playerUnits.indexOf(target), 1);
                        const cell = playerGrid.children[target.position];
                        cell.removeChild(cell.querySelector('.unit'));
                    }
                });

                // Check battle end
                if (playerUnits.length === 0) {
                    log("Game Over! All units defeated.");
                    clearInterval(battleInterval);
                }
                if (enemies.length === 0) {
                    log("Victory! All enemies defeated.");
                    clearInterval(battleInterval);
                    gold += 5; // Reward gold
                    goldDisplay.textContent = gold;
                    renderShop(); // Refresh shop
                }
            }, 1000); // Update every 1 second
        }

        // Log messages
        function log(message) {
            battleLog.innerHTML += `${message}<br>`;
            battleLog.scrollTop = battleLog.scrollHeight;
        }

        // Start battle after 10 seconds (for testing)
        setTimeout(startBattle, 10000);
    </script>
</body>
</html>
