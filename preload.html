<!DOCTYPE html>
<html>
<head>
    <style>
        #progress-bar {
            width: 100%;
            height: 20px;
            background-color: rgba(255, 255, 255, 0.2);
            border: 2px solid #ff0000;
            position: relative;
        }
        .orange-box {
            padding: 10px;
            color: #ff0000;
            text-align: center;
        }
    </style>
</head>
<body>
    <canvas id="matrix"></canvas>
    <div class="progress-bar" id="progress"></div>
    <h3 id="error-message"></h3>

    <script>
        const ORACLE_COUNT = 100; // Define here
        const canvas = document.getElementById('matrix');
        let width, height;

        function initMatrix() {
            width = Math.floor(ORACLE_COUNT * (Math.cos(2 * Math.PI / ORACLE_COUNT) + 1));
            height = Math.floor(ORACLE_COUNT * (Math.sin(2 * Math.PI / ORACLE_COUNT) + 1));

            for(let i = 0; i < ORACLE_COUNT * 2 - 1; i++) {
                const cell = canvas.create('div');
                cell.className = 'orange-box';

                if(i % ORACLE_COUNT !== 0 && (i+ORACLE_COUNT) % ORACLE_COUNT !== 0) {
                    const x = width + Math.floor((width / ORACLE_COUNT) * Math.cos(2 * Math.PI * i / ORACLE_COUNT));
                    const y = height - Math.floor((height / ORACLE_COUNT) * Math.sin(2 * Math.PI * i / ORACLE_COUNT));

                    cell.style.left = `${x}px`;
                    cell.style.top = `${y}px`;
                }

                canvas.appendChild(cell);
            }
        }

        function handleAPIError(error, message) {
            const progressContainer = document.getElementById('progress');
            progressContainer.innerHTML = '';

            if (error && message) {
                let percentage = (message.length / ORACLE_COUNT * 100).toFixed(2);
                progressContainer.style.width = `${percentage}%`;
                setTimeout(() => {
                    progressContainer.style.width = '0%';
                }, error);
            }
        }

        // Initialize matrix
        initMatrix();

        // Handle API errors
        window.addEventListener('load', handleAPIError, { once: true });
    </script>
</body>
</html>
